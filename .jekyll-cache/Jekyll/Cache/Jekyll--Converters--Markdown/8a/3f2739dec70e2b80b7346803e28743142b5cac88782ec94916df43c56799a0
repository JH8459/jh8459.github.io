I"<p><img src="https://user-images.githubusercontent.com/83164003/152715311-82cc5a61-ca9c-4c46-a955-77970d4449bb.jpg" alt="Project" /></p>
<h2 id="refactoring">Refactoring</h2>

<p>민감정보 암호화 Task는 모두 끝냈다.<br />
다음 가져갈 Task로 로그아웃시 발생하는 에러 핸들링을 해보려한다.</p>

<h3 id="문제점">문제점</h3>
<hr />

<p>현재 로그인 방식은 <code class="language-plaintext highlighter-rouge">cookie</code>에 JWT Token을 담아 인증하는 방식으로 로그인검증이 이루어지고 있으며, 로그아웃시에는 로그인 여부를 검증한 뒤, 쿠키를 만료시키는 방식으로 로그아웃 처리를 구현하였다.</p>

<p><img src="https://user-images.githubusercontent.com/83164003/153110704-f562c05e-890a-4512-a358-f2cc3e431102.png" alt="스크린샷, 2022-02-09 11-31-35" /></p>

<p>로그아웃시 에러가 발생하는 대표적인 경우는 다음과 같다.</p>

<ul>
  <li>
    <p>웹이나 모바일 환경에서 강제로 쿠키를 삭제 후 Logout시 발생</p>

    <p><img src="https://user-images.githubusercontent.com/83164003/153110448-62615271-8a2c-4055-b3cd-59e80b7c1dbb.png" alt="스크린샷, 2022-02-09 11-28-57" /></p>
  </li>
</ul>

<p>우선 위의 크롬환경에서 쿠키를 강제로 삭제하는 경우 <code class="language-plaintext highlighter-rouge">cookie</code>에 담긴 JWT Token값이 날아가기 때문에, 로그인 검증이 이뤄지지 않아 발생하는 에러이다.</p>

<p><img src="https://user-images.githubusercontent.com/83164003/153110122-099531cf-6e6f-4deb-bce3-96c4f73d9f2a.png" alt="스크린샷, 2022-02-09 11-24-50" /></p>

<p>검색 결과 우선 에러의 원인은 <strong>“서버가 클라이언트에 둘 이상의 응답을 보내려고 할 때 발생하는 에러”</strong> 였다.</p>

<h3 id="문제-해결">문제 해결</h3>
<hr />

<p>우선 간단히 해결은 하였다.</p>

<p><br />
<br /></p>
:ET