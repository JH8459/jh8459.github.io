---
title: "[Problem] JavaScript 깊은 복사, 얕은 복사"
category: Problem
excerpt: "[Problem] JavaScript 깊은 복사, 얕은 복사"
---

![problem](https://user-images.githubusercontent.com/83164003/128357082-c2307e8c-b553-4983-a044-5754d7e0be79.jpeg)

# [걸림돌] JavaScript 깊은 복사, 얕은 복사
## 1. 구체적인 문제
- 객체를 함수의 전달인자로 넘겨줄 경우, 레퍼런스가 전달되는 예제 코드 실습중. 이해가 안간 부분을 우선 포스팅두었다.
- 참조 자료형은 원시자료형과 다르게 변수명에는 주소값이 할당되며, 변수 내부의 값들은 `heap` 공간에 저장된다 학습하였다.  아래 코드가 문제가 발생된 요인이다.


	```javascript
	const obj = {
		mastermind: 'Joker',
		henchwoman: 'Harley',
		relations: ['Anarky', 'Duela Dent', 'Lucy'],
		twins: {
		 'Jared Leto': 'Suicide Squad',
		 'Joaquin Phoenix': 'Joker',
		 'Heath Ledger': 'The Dark Knight',
		 'Jack Nicholson': 'Tim Burton Batman',
		},
	};
	```

- 해당 내용으로 정의된 객체에 

	```javascript
  const copiedObj = Object.assign({}, obj);
	
  delete obj.twins['Jared Leto'];
	```

- `copiedObj` 변수를 새로 선언하여, `Object.assign()` 메소드를 이용하여 `obj` 객체 값을 복사하였다. 
-  그 후 `obj` 객체의 `twins` 키 중 `'Jared Leto'` 값을 삭제하였다. 

- 내가 예상한 각각 변수의 그림은 아래와 같다.

	```javascript
	obj = {  // obj 변수는 copiedObj 변수와 다른 주소를 갖고있다.
		mastermind: 'Joker',
		henchwoman: 'Harley',
		relations: ['Anarky', 'Duela Dent', 'Lucy'],
		twins: {
		  // 'Jared Leto' 키 삭제됨.
		 'Joaquin Phoenix': 'Joker',
		 'Heath Ledger': 'The Dark Knight',
		 'Jack Nicholson': 'Tim Burton Batman',
		},
	};

	copiedObj = {
		mastermind: 'Joker',
		henchwoman: 'Harley',
		relations: ['Anarky', 'Duela Dent', 'Lucy'],
		twins: {
		 'Jared Leto': 'Suicide Squad', // 'Jared Leto' 키 존재함.
		 'Joaquin Phoenix': 'Joker',
		 'Heath Ledger': 'The Dark Knight',
		 'Jack Nicholson': 'Tim Burton Batman',
		},
	};
	```

- 하지만 예상과는 다른 결과가 나왔다.

  ```javascript
  'Jared Leto' in copiedObj.twins  // false
  ```

## 2. 해결방안
- 참고할 사이트들은 많았으며, 겉핧기식 개념은 머릿속으로는 알았다만 개념에 대해 파고 들수록 재귀함수.. Iterable 까지 알아야 완벽한 학습이 되는 구조인걸 알았다. 우선 다음주 정도에 고차함수 일정에서 재귀함수까지 학습 후 다시 한번 깊은복사와 얕은복사에 대해서 짚고 넘어가야겠다.

																																																 
  > <a href="https://medium.com/watcha/%EA%B9%8A%EC%9D%80-%EB%B3%B5%EC%82%AC%EC%99%80-%EC%96%95%EC%9D%80-%EB%B3%B5%EC%82%AC%EC%97%90-%EB%8C%80%ED%95%9C-%EC%8B%AC%EB%8F%84%EC%9E%88%EB%8A%94-%EC%9D%B4%EC%95%BC%EA%B8%B0-2f7d797e008a" target="_blank">참고사이트 1</a>
  > <a href="https://www.digitalocean.com/community/tutorials/copying-objects-in-javascript" target="_blank"> 참고사이트 2 </a>

## 3. Solution

- ~~21.08.10 ~ 08.15 사이 고차함수 학습 후 해결예정~~
